<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket</title>
</head>

<body>
    test page

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io('/passenger-socket');
        const dSocket = io('/driver-socket');

        socket.on('connect', function () {
            console.log('check 2', socket.id);
            socket.emit("init", { id: 1, fcm: "test", location: { lat: 8.983315, long: 38.77973170000001 } });
        });

        // dSocket.on('connect', function () {
        //     console.log('check driver', dSocket.id);
        //     dSocket.emit("init", { id: 1, fcm: "test", vehicleId: "32", location: { lat: 8.983315, long: 38.77973170000001 } });
        // });

        socket.on('nearDrivers', (vehicles) => {
            console.log(vehicles)
        })

        socket.on("test", () => {
            console.log("test emit")
        })

        setTimeout(() => {
            socket.emit('search', {vehicleType: "5ef32208f8413c753a799632", pickupLocation: { lat: 8.983315, long: 38.77973170000001 }, dropOffLocation: { lat: 3.43423, long: 9.16525 }});
        }, 3000)

        // setTimeout(() => {
        //     dSocket.emit('updateRequest', {driverId: 1, passengerId: 1, status: "declines"});
        // }, 4000)

        socket.on('disconnect', function () {
            console.log('disconnect');
        });
        console.log("test")
    </script>
</body>

</html>